<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIS Web App with Drawing Tools, Search Boundaries, Buffering, and KML Export</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <!-- Leaflet Draw CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">
    <!-- Leaflet Search Plugin CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div id="sidebar">
        <h2>GIS Tools</h2>
        <p>Use the toolbar on the map to draw points, lines, and polygons.</p>
        
        <!-- Original Export Button -->
        <button id="exportKML">Export Drawn Features (KML)</button>

        <h2>Search & Export</h2>
        <!-- New Search Box -->
        <input type="text" id="searchInput" placeholder="Search for location...">
        
        <!-- New Export Button for Search results -->
        <button id="exportKMLSearch">Export Search Boundaries (KML)</button>

        <!-- Analysis Section -->
        <div class="analysis-section">
            <h2>Analysis: Buffering</h2>
            <p>Enter X, Y coordinates in meters and the buffer distance (in meters):</p>
            <label for="xCoord">X Coordinate (longitude):</label>
            <input type="number" id="xCoord" placeholder="Enter X Coordinate">
            <label for="yCoord">Y Coordinate (latitude):</label>
            <input type="number" id="yCoord" placeholder="Enter Y Coordinate">
            <label for="bufferDistance">Buffer Distance (meters):</label>
            <input type="number" id="bufferDistance" placeholder="Enter buffer distance">
            <button id="applyBuffer">Apply Buffer</button>
        </div>
    </div>

    <!-- Map Container -->
    <div id="map"></div>

    <script src="https://cdn.jsdelivr.net/npm/@turf/turf/turf.min.js"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Leaflet Draw Plugin JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <!-- Leaflet Search Plugin JS -->
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <!-- Leaflet Buffer Plugin -->
    <script src="https://unpkg.com/leaflet-buffer@1.0.0/leaflet-buffer.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
</body>
</html>
